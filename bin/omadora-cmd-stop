#!/bin/bash

# Stop command that first closes all application windows (thus giving them a chance to save state).
# This is particularly helpful for applications like Chromium that otherwise won't shutdown cleanly.

omadora-state clear relaunch-required

# Schedule the shutdown to happen after closing windows (detached from terminal)
nohup bash -c "sleep 2 && uwsm stop" >/dev/null 2>&1 &

# Now close all windows
omadora-hyprland-window-close-all
sleep 1 # Allow apps like Chrome to shutdown correctly
